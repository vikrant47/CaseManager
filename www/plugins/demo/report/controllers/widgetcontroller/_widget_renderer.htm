<?php
$randomId = substr(md5(mt_rand()), 0, 7);
?>
<?php foreach ($widget->library->getCssFiles() as $file) {
    $this->addCss($file);
} ?>
<?php foreach ($widget->library->getJsFiles() as $file) {
    $this->addJs($file);
} ?>
<?php $this->addJs('/plugins/demo/report/controllers/widgetcontroller/assets/js/widget.data.js') ?>
<?php if ($preview === true) { ?>
    <a class="preview-link" href="../render-widget/<?= $widget->id ?>" style="margin: 0;auto;">View</a>
<?php } ?>
<?php if ($dashboard === true) { ?>
    <button type="button" class="close widget-control close-widget" data-dismiss="popover"
            aria-hidden="true">Ã—
    </button>
<?php } ?>
<div id="widget-container-<?= $randomId ?>" style="height: 100%;width: 100%;" class="widget-container"
     data-widget-id="<?= $widget->id ?>">
    <div class="widget-header">
        <h3></h3>
        <div class="widget-toolbar">
        </div>
    </div>
    <div class="widget-body" style="width: 100%; height: 100%;">

    </div>
    <div class="widget-footer"></div>
</div>

<script>
    var widget = new Widget('<?=$widget->id?>', '<?=$randomId?>');
    widget.fetchAndRender();
</script>
