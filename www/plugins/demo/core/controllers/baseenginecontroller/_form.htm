<?php $this->addCss('/plugins/demo/core/controllers/baseenginecontroller/assets/css/engine.css') ?>
<?php $this->addJs('/plugins/demo/core/controllers/baseenginecontroller/assets/js/engine.js') ?>
<?php $this->addJs('/plugins/demo/core/controllers/baseenginecontroller/assets/js/engine.ui.js') ?>
<div class="engine-form-wrapper">
    <?= $this->makePartial($view, ['contents' => $contents]); ?>
    <script>
        $('.form-buttons .loading-indicator-container').prepend('<div class="actions"></div>').find('>button').remove();
        var actions = <?=$this->getFormActions($context)->toJSON()?>;
        var modelRecord = <?=$this->getModelRecord()->toJSON()?>;
        <?php $model = $this->formGetModel()?>
        var formModel = <?=empty($model) ? 'null' : $model->toJSON()?>;
        var controller = <?=json_encode($this->getControllerInfo())?>;
        Engine.instance.ui.setModel(modelRecord);
        var form = Engine.instance.formService.getCurrentForm();
        form.addActions(actions);
    </script>
</div>
